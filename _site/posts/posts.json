[
  {
    "path": "posts/2021-04-28-the-nfl-draft-an-analysis-of-player-value-outcomes-by-round-and-position/",
    "title": "The NFL Draft: An Analysis of Player Value Outcomes by Round and Position",
    "description": "A look at the NFL draft, how career \"value\" post-draft is distributed historically by round and position, and some interesting storylines to follow for the NFL's big night in 2021",
    "author": [
      {
        "name": "Jeff Asselin",
        "url": "https://github.com/jassassin68/"
      }
    ],
    "date": "2021-04-28",
    "categories": [
      "r",
      "sports",
      "nfl"
    ],
    "contents": "\r\nIntroduction\r\nThe NFL draft is arguably the most exciting day of the NFL offseason for the league office, team organizations, players, and fans. The worst teams from the previous season have the most to gain (assuming they haven’t traded away their extremely valuable picks well before draft day, which is on April 29th this year), as well as the highest potential of missing out on a franchise-altering player if they don’t pick correctly; the best teams, although likely having lower potential value picks, need a strategy if they are going to maximize the output of their draft capital.\r\nA lot of analysis you will see leading up to draft day is related to scouting and analyzing how college players could measure up when they make the move to the pros, for the reasons I mentioned above: you want to know who has the best likelihood of succeeding in the NFL. The big questions this year go something like:\r\nIs Kyle Pitts, a TE, really worth a top 5 pick?\r\nShould Devonta Smith or Jaylen Waddle be the first Alabama wide receiver selected this year, and why?\r\nIS Mac Jones an NFL-caliber quarterback, and if so how high is his “ceiling”?\r\nTeams and commentators understandably heavily weight scouting, finding comparable current NFL players for highly touted college players, and general player evaluation in regard to the plan when it comes to draft day. That being said, we have plenty of historical data to understand player outcomes once they have entered the league, and there is a ton of information to gain from taking a post-hoc approach to understanding draft performance, how certain rounds or positions should be viewed with a risk-reward lens, and identifying strategies to improve your team’s stock where other teams may not have done their homework.\r\nI have not seen too much recent content on this type of analysis, which could just be getting drowned out by scouting reports, rumors, and trades, and everything else happening before Draft Day, which is understandable, but this type of analysis and content is important and should be a significant part of any Draft Day kit as well, so let’s get into it!\r\nBelow I’ll share some ideas for understanding historical pick and positional value, explore past data to see if it can tell us anything about how teams should approach future drafts, and see if we can advise on any simple strategies teams could deploy that could help lead to better draft results.\r\nAlways need to shout out someone in these posts: thanks to Pranav Rajaram, Lee Sharpe, and Pro-Football-Reference for your work on NFL data, and the folks at RStudio for an amazing product.\r\nLoad Libraries\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(ggplot2)\r\nlibrary(gt)\r\n\r\n\r\n\r\nRead in your data\r\n\r\n\r\nplayer_av <- read_csv(\"https://raw.githubusercontent.com/pranavrajaram/nfldraft/main/pfravs.csv\")\r\n\r\n\r\n\r\nExploratory Visuals and Tables\r\nI have started with a scatterplot of all picks between 2000 and 2014, for all teams and positions, with pick number on the x-axis and career AV, also known as “approximate value” of a player for all games played in their career, on the y-axis, with a linear average line drawn through all picks.\r\nLooking at all picks in this simplified way, we can see that on average, the better the pick the higher the players career AV will be for this dataset.\r\n\r\n\r\n# All Players - Scatterplot - Career AV versus Pick Number\r\np_scatter <- player_av %>%\r\n    filter(draft_year >= 2000, draft_year <= 2015) %>%\r\n    ggplot(aes(x=pick, y=career_av, color=pos_pfr)) + \r\n    geom_point(size=2) +\r\n    geom_smooth(method=lm , color=\"black\", se=FALSE)\r\n\r\nprint(p_scatter)\r\n\r\n\r\n\r\n\r\nNext, I looked at the same dataset but instead of a scatterplot I viewed it as boxplots, grouped by draft round, which shows the distribution of Career AV within each round for the years 2000 through 2015, with the biggest outliers labeled for reference.\r\nThis view puts in perspective the anomaly that is Tom Brady.\r\n\r\n\r\n# All Players - Boxplot - Career AV Distribution - by Round\r\np_box <- player_av %>%\r\n    filter(draft_year >= 2000, draft_year <= 2015) %>%\r\n    mutate(career_av = replace_na(career_av, 0)) %>%\r\n    ggplot(aes(y=career_av, x = round, group = round)) + \r\n    geom_boxplot() + \r\n    scale_x_discrete(limits=1:12, labels=1:12) +\r\n    geom_text(aes(group = round, label = ifelse(!between(career_av,-5.6*IQR(career_av), 5.6*IQR(career_av)), \r\n                                                player,'')), \r\n            position = position_dodge(width=0.75),\r\n            hjust = -.2, size = 3)\r\n\r\nprint(p_box)\r\n\r\n\r\n\r\n\r\nIn a tabular view of the table, we can see some summary statistics around average and median Career AV per round, as well as average years as a starter, average Pro Bowls, and average years named All-Pro.\r\n\r\n\r\n\r\n\r\n\r\nby_round_av_stats <- player_av %>%\r\n    filter(draft_year >= 2000, draft_year <= 2015) %>%\r\n    mutate(career_av = replace_na(career_av, 0),\r\n           games = replace_na(games, 0)) %>%\r\n    add_count(player) %>%\r\n  #  filter(career_av >= 0) %>%\r\n    group_by(round) %>%\r\n    summarise('player count' = sum(n),\r\n              'career av avg' = round(mean(career_av),1),\r\n          #    c_av_25th_tile = quantile(career_av, c(0.25)),\r\n              'career av median' = median(career_av),\r\n          #    c_av_75th_tile = quantile(career_av, c(0.75)),\r\n              'avg years starter' = round(mean(years_starter),1),\r\n              'avg pro bowls' = round(mean(pro_bowl),1),\r\n              'avg all pro' = round(mean(all_pro),1)) %>%\r\n  ungroup()\r\n\r\nby_round_av_stats %>%\r\n    gt() %>% \r\n    gt_theme_538()\r\n\r\n\r\n@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\r\nhtml {\r\n  font-family: Chivo, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#dixpajmxqj .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: transparent;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: left;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#dixpajmxqj .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 4px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#dixpajmxqj .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_col_heading {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#dixpajmxqj .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#dixpajmxqj .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#dixpajmxqj .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#dixpajmxqj .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#dixpajmxqj .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#dixpajmxqj .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#dixpajmxqj .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#dixpajmxqj .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#dixpajmxqj .gt_row {\r\n  padding-top: 3px;\r\n  padding-bottom: 3px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#dixpajmxqj .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#dixpajmxqj .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#dixpajmxqj .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#dixpajmxqj .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#dixpajmxqj .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#dixpajmxqj .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dixpajmxqj .gt_sourcenote {\r\n  font-size: 12px;\r\n  padding: 4px;\r\n}\r\n\r\n#dixpajmxqj .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#dixpajmxqj .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#dixpajmxqj .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#dixpajmxqj .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#dixpajmxqj .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#dixpajmxqj .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#dixpajmxqj .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#dixpajmxqj .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-size: 65%;\r\n}\r\nround\r\n      player count\r\n      career av avg\r\n      career av median\r\n      avg years starter\r\n      avg pro bowls\r\n      avg all pro\r\n    1\r\n      529\r\n      43.1\r\n      39\r\n      5.7\r\n      1.5\r\n      0.4\r\n    2\r\n      514\r\n      27.7\r\n      23\r\n      3.8\r\n      0.5\r\n      0.1\r\n    3\r\n      563\r\n      18.1\r\n      11\r\n      2.3\r\n      0.3\r\n      0.1\r\n    4\r\n      597\r\n      14.2\r\n      8\r\n      1.7\r\n      0.2\r\n      0.0\r\n    5\r\n      584\r\n      9.8\r\n      3\r\n      1.2\r\n      0.1\r\n      0.0\r\n    6\r\n      633\r\n      7.4\r\n      2\r\n      0.8\r\n      0.1\r\n      0.0\r\n    7\r\n      759\r\n      5.9\r\n      1\r\n      0.6\r\n      0.0\r\n      0.0\r\n    \r\n\r\nNext, I looked at the same view, except instead of Career AV overall I calculated “Career AV per game played”, which normalizes AV to a per game average, which should allow for a better comparison regardless of where players are in their career progression.\r\nAndrew Luck and Patrick Willis stand out here, but make sense as outliers: they both retired near or at the height of their careers, so on a per game basis they retired with a very high “Career AV”, as opposed to other Hall of Fame-worthy players who likely play until their per game AV begins to decline.\r\n\r\n\r\n# All Players - Boxplot - Career AV per Game Played Distribution - by Round\r\np_pg_box <- player_av %>%\r\n    filter(draft_year >= 2000, draft_year <= 2015) %>%\r\n    mutate(career_av = replace_na(career_av, 0),\r\n           games = replace_na(games, 0)) %>%\r\n    filter(career_av >= 0) %>%\r\n    mutate(career_av_pg = round(career_av / games, 7)) %>%\r\n    mutate(career_av_pg = replace_na(career_av_pg,0)) %>%\r\n    ggplot(aes(y=career_av_pg, x = round, group = round)) + \r\n    geom_boxplot() + \r\n    scale_x_discrete(limits=1:7, labels=1:7) +\r\n    geom_text(aes(group = round, label = ifelse(!between(career_av_pg,-3.25*IQR(career_av_pg), 3.25*IQR(career_av_pg)), \r\n                                                player,'')), \r\n            position = position_dodge(width=0.75),\r\n            hjust = -.2, size = 3)\r\n\r\nprint(p_pg_box)\r\n\r\n\r\n\r\n\r\nAnd the tabular view of the same summary statistics as above are below:\r\n\r\n\r\nby_round_av_pg_stats <- player_av %>%\r\n    filter(draft_year >= 2000, draft_year <= 2015) %>%\r\n    mutate(career_av = replace_na(career_av, 0),\r\n           games = replace_na(games, 0)) %>%\r\n    filter(career_av >= 0) %>%\r\n    mutate(career_av_pg = round(career_av / games, 7),\r\n           career_av_pg = replace_na(career_av_pg,0)) %>%\r\n    add_count(player) %>%\r\n  #  filter(career_av >= 0) %>%\r\n    group_by(round) %>%\r\n    summarise('player count' = sum(n),\r\n              'career av per game avg' = round(mean(career_av_pg),4),\r\n          #    c_av_25th_tile = quantile(career_av, c(0.25)),\r\n              'career av pg median' = round(median(career_av_pg),4),\r\n          #    c_av_75th_tile = quantile(career_av, c(0.75)),\r\n              'avg years starter' = round(mean(years_starter),1),\r\n              'avg pro bowls' = round(mean(pro_bowl),1),\r\n              'avg all pro' = round(mean(all_pro),1)) %>%\r\n  ungroup()\r\n\r\nby_round_av_pg_stats %>%\r\n    gt() %>% \r\n    gt_theme_538()\r\n\r\n\r\n@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\r\nhtml {\r\n  font-family: Chivo, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#nxtldzxlgx .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: transparent;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: left;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#nxtldzxlgx .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 4px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#nxtldzxlgx .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_col_heading {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#nxtldzxlgx .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#nxtldzxlgx .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#nxtldzxlgx .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#nxtldzxlgx .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#nxtldzxlgx .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#nxtldzxlgx .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#nxtldzxlgx .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#nxtldzxlgx .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#nxtldzxlgx .gt_row {\r\n  padding-top: 3px;\r\n  padding-bottom: 3px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#nxtldzxlgx .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#nxtldzxlgx .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#nxtldzxlgx .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#nxtldzxlgx .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#nxtldzxlgx .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#nxtldzxlgx .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#nxtldzxlgx .gt_sourcenote {\r\n  font-size: 12px;\r\n  padding: 4px;\r\n}\r\n\r\n#nxtldzxlgx .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#nxtldzxlgx .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#nxtldzxlgx .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#nxtldzxlgx .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#nxtldzxlgx .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#nxtldzxlgx .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#nxtldzxlgx .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#nxtldzxlgx .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-size: 65%;\r\n}\r\nround\r\n      player count\r\n      career av per game avg\r\n      career av pg median\r\n      avg years starter\r\n      avg pro bowls\r\n      avg all pro\r\n    1\r\n      529\r\n      0.3832\r\n      0.3696\r\n      5.7\r\n      1.5\r\n      0.4\r\n    2\r\n      514\r\n      0.2840\r\n      0.2857\r\n      3.8\r\n      0.5\r\n      0.1\r\n    3\r\n      563\r\n      0.2151\r\n      0.2008\r\n      2.3\r\n      0.3\r\n      0.1\r\n    4\r\n      597\r\n      0.1773\r\n      0.1600\r\n      1.7\r\n      0.2\r\n      0.0\r\n    5\r\n      584\r\n      0.1321\r\n      0.1096\r\n      1.2\r\n      0.1\r\n      0.0\r\n    6\r\n      632\r\n      0.1088\r\n      0.0833\r\n      0.8\r\n      0.1\r\n      0.0\r\n    7\r\n      757\r\n      0.0927\r\n      0.0526\r\n      0.6\r\n      0.0\r\n      0.0\r\n    \r\n\r\nHow about if we summarize by position? As you can see from the table below, positions with a proper sample and the highest ‘Approximate value’ per game are Tackle, Quarterback, Guard, and Center. This tells you that: * These positions are vital to the success of your football team * A team should heavily consider investing a significant amount of draft captial into these positions\r\n\r\n\r\nby_pos_av_pg_stats <- player_av %>%\r\n    filter(draft_year >= 2000, draft_year <= 2015) %>%\r\n    mutate(career_av = replace_na(career_av, 0),\r\n           games = replace_na(games, 0)) %>%\r\n    filter(career_av >= 0) %>%\r\n    mutate(career_av_pg = round(career_av / games, 7),\r\n           career_av_pg = replace_na(career_av_pg,0)) %>%\r\n    add_count(player) %>%\r\n  #  filter(career_av >= 0) %>%\r\n    group_by(pos_pfr) %>%\r\n    summarise(player_count = sum(n),\r\n              career_av_per_game_avg = round(mean(career_av_pg),4),\r\n          #    c_av_25th_tile = quantile(career_av, c(0.25)),\r\n              'career_av_pg_median' = round(median(career_av_pg),4),\r\n          #    c_av_75th_tile = quantile(career_av, c(0.75)),\r\n              'avg years starter' = round(mean(years_starter),1),\r\n              'avg pro bowls' = round(mean(pro_bowl),1),\r\n              'avg all pro' = round(mean(all_pro),1)) %>%\r\n    filter(player_count >= 12) %>%\r\n    ungroup()\r\n\r\nby_pos_av_pg_stats %>%\r\n  arrange(desc(career_av_per_game_avg)) %>%\r\n  gt() %>% \r\n  gt_theme_538()\r\n\r\n\r\n@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\r\nhtml {\r\n  font-family: Chivo, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#zaessfsnli .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: transparent;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: left;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#zaessfsnli .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 4px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#zaessfsnli .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_col_heading {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#zaessfsnli .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#zaessfsnli .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#zaessfsnli .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#zaessfsnli .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#zaessfsnli .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#zaessfsnli .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#zaessfsnli .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#zaessfsnli .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#zaessfsnli .gt_row {\r\n  padding-top: 3px;\r\n  padding-bottom: 3px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#zaessfsnli .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#zaessfsnli .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#zaessfsnli .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#zaessfsnli .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#zaessfsnli .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#zaessfsnli .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zaessfsnli .gt_sourcenote {\r\n  font-size: 12px;\r\n  padding: 4px;\r\n}\r\n\r\n#zaessfsnli .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#zaessfsnli .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#zaessfsnli .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#zaessfsnli .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#zaessfsnli .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#zaessfsnli .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#zaessfsnli .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#zaessfsnli .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-size: 65%;\r\n}\r\npos_pfr\r\n      player_count\r\n      career_av_per_game_avg\r\n      career_av_pg_median\r\n      avg years starter\r\n      avg pro bowls\r\n      avg all pro\r\n    T\r\n      317\r\n      0.2709\r\n      0.2667\r\n      3.1\r\n      0.4\r\n      0.1\r\n    QB\r\n      199\r\n      0.2533\r\n      0.2188\r\n      2.1\r\n      0.5\r\n      0.0\r\n    G\r\n      222\r\n      0.2366\r\n      0.2632\r\n      2.8\r\n      0.4\r\n      0.1\r\n    C\r\n      101\r\n      0.2231\r\n      0.2353\r\n      3.0\r\n      0.5\r\n      0.1\r\n    RB\r\n      339\r\n      0.2032\r\n      0.1727\r\n      1.4\r\n      0.3\r\n      0.1\r\n    LB\r\n      487\r\n      0.2014\r\n      0.1637\r\n      2.3\r\n      0.3\r\n      0.1\r\n    DT\r\n      328\r\n      0.1984\r\n      0.1818\r\n      2.3\r\n      0.3\r\n      0.1\r\n    DE\r\n      377\r\n      0.1954\r\n      0.1786\r\n      2.5\r\n      0.4\r\n      0.1\r\n    OLB\r\n      23\r\n      0.1909\r\n      0.1622\r\n      1.4\r\n      0.1\r\n      0.0\r\n    S\r\n      13\r\n      0.1748\r\n      0.1875\r\n      1.8\r\n      0.2\r\n      0.1\r\n    DB\r\n      780\r\n      0.1670\r\n      0.1429\r\n      2.1\r\n      0.3\r\n      0.1\r\n    WR\r\n      541\r\n      0.1647\r\n      0.1322\r\n      1.7\r\n      0.3\r\n      0.1\r\n    CB\r\n      30\r\n      0.1494\r\n      0.1429\r\n      1.2\r\n      0.2\r\n      0.1\r\n    OL\r\n      40\r\n      0.1123\r\n      0.0000\r\n      1.1\r\n      0.1\r\n      0.0\r\n    K\r\n      33\r\n      0.1050\r\n      0.1402\r\n      0.0\r\n      0.4\r\n      0.2\r\n    TE\r\n      248\r\n      0.0968\r\n      0.0588\r\n      2.4\r\n      0.3\r\n      0.0\r\n    P\r\n      30\r\n      0.0924\r\n      0.1076\r\n      0.0\r\n      0.5\r\n      0.3\r\n    FB\r\n      42\r\n      0.0362\r\n      0.0198\r\n      1.5\r\n      0.0\r\n      0.0\r\n    \r\n\r\nWhat if there are differences in terms of ‘approximate value’ outcomes within positions AND by round? The table below yields a ton of information (showing only the top 35 combinations by AV per game), here are some highlights:\r\nA 1st round QB, on average, has the highest per game ‘approximate value’ out of any draft round and position combination, followed by 1st round Ts, 1st round LBs, and 1st round RBs. This is certainly part of the reason why we have seen a QB taken 1st overall 8 out of the last 12 years, and is what is expected to happen this year with Trevor Lawrence as the consensus projected #1 overall pick.\r\nA 2nd round T or a 2nd round QB on average have higher per game ‘approximate values’ than a 1st round DT, WR, DB, or DE; this means if you are selecting one of these positions in the 1st round you better be sure to have a strong conviction that the player you are selecting is not average and is an upside outlier. Without that conviction, you are better off selecting a player of a different position (again looking at Chase, Waddle, and Smith, all projected top 12 picks, can you be sure they will be worth it?)\r\nA 1st round TE is 23rd in ‘approximate value’ per game ranking by draft round and position, and on average has a lower AV per game than a Center selected in the 4th round or a 3rd round RB. This makes all of the buzz around Kyle Pitts, and the fact that he is expected to go top 5, even more crazy. Any team willing to take that risk must be seeing only incredible things from every other angle in their scouting report, potentially with a plan to use him at a different position or multiple positions. Removing the scouting information from the equation and only looking at outcomes, this looks like a huge risk and a disaster waiting to happen, which is part of what makes the draft so exciting.\r\n\r\n\r\nby_round_and_pos_av_pg_stats <- player_av %>%\r\n    filter(draft_year >= 2000, draft_year <= 2015) %>%\r\n    mutate(career_av = replace_na(career_av, 0),\r\n           games = replace_na(games, 0)) %>%\r\n    filter(career_av >= 0) %>%\r\n    mutate(career_av_pg = round(career_av / games, 7),\r\n           career_av_pg = replace_na(career_av_pg,0)) %>%\r\n    add_count(player) %>%\r\n    group_by(round, pos_pfr) %>%\r\n    summarise(player_count = sum(n),\r\n              career_av_per_game_avg = round(mean(career_av_pg),4),\r\n          #    c_av_25th_tile = quantile(career_av, c(0.25)),\r\n              career_av_pg_median = round(median(career_av_pg),4),\r\n          #    c_av_75th_tile = quantile(career_av, c(0.75)),\r\n              'avg years starter' = round(mean(years_starter),1),\r\n              'avg pro bowls' = round(mean(pro_bowl),1),\r\n              'avg all pro' = round(mean(all_pro),1)) %>%\r\n    filter(player_count >= 12) %>%\r\n    ungroup() %>%\r\n    head(35)\r\n\r\nby_round_and_pos_av_pg_stats %>%\r\n  arrange(desc(career_av_pg_median)) %>%\r\n  gt() %>% \r\n  gt_theme_538()\r\n\r\n\r\n@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\r\nhtml {\r\n  font-family: Chivo, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#iswlsdtdai .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: transparent;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: left;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#iswlsdtdai .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 4px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#iswlsdtdai .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 3px;\r\n  border-top-color: transparent;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_col_heading {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#iswlsdtdai .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: white;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#iswlsdtdai .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#iswlsdtdai .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#iswlsdtdai .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 3px;\r\n  border-bottom-color: black;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#iswlsdtdai .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#iswlsdtdai .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#iswlsdtdai .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#iswlsdtdai .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#iswlsdtdai .gt_row {\r\n  padding-top: 3px;\r\n  padding-bottom: 3px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#iswlsdtdai .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 80%;\r\n  font-weight: bolder;\r\n  text-transform: uppercase;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#iswlsdtdai .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#iswlsdtdai .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#iswlsdtdai .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#iswlsdtdai .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#iswlsdtdai .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#iswlsdtdai .gt_sourcenote {\r\n  font-size: 12px;\r\n  padding: 4px;\r\n}\r\n\r\n#iswlsdtdai .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#iswlsdtdai .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#iswlsdtdai .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#iswlsdtdai .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#iswlsdtdai .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#iswlsdtdai .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#iswlsdtdai .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#iswlsdtdai .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-size: 65%;\r\n}\r\nround\r\n      pos_pfr\r\n      player_count\r\n      career_av_per_game_avg\r\n      career_av_pg_median\r\n      avg years starter\r\n      avg pro bowls\r\n      avg all pro\r\n    1\r\n      QB\r\n      43\r\n      0.5173\r\n      0.5497\r\n      5.7\r\n      1.3\r\n      0.1\r\n    1\r\n      T\r\n      62\r\n      0.4406\r\n      0.4541\r\n      6.4\r\n      1.4\r\n      0.3\r\n    1\r\n      LB\r\n      50\r\n      0.4373\r\n      0.4239\r\n      6.2\r\n      2.4\r\n      0.7\r\n    1\r\n      RB\r\n      44\r\n      0.4283\r\n      0.4219\r\n      4.6\r\n      1.2\r\n      0.4\r\n    1\r\n      G\r\n      17\r\n      0.4440\r\n      0.4167\r\n      6.8\r\n      2.6\r\n      0.8\r\n    2\r\n      T\r\n      43\r\n      0.3902\r\n      0.4069\r\n      4.7\r\n      0.4\r\n      0.1\r\n    2\r\n      QB\r\n      18\r\n      0.3516\r\n      0.3609\r\n      3.1\r\n      1.1\r\n      0.1\r\n    1\r\n      DT\r\n      49\r\n      0.3566\r\n      0.3590\r\n      5.6\r\n      1.1\r\n      0.4\r\n    1\r\n      WR\r\n      70\r\n      0.3537\r\n      0.3540\r\n      4.8\r\n      1.2\r\n      0.3\r\n    2\r\n      C\r\n      12\r\n      0.3587\r\n      0.3515\r\n      7.1\r\n      0.9\r\n      0.2\r\n    2\r\n      G\r\n      25\r\n      0.3492\r\n      0.3504\r\n      5.0\r\n      0.6\r\n      0.0\r\n    1\r\n      DE\r\n      68\r\n      0.3388\r\n      0.3387\r\n      5.4\r\n      1.3\r\n      0.4\r\n    2\r\n      LB\r\n      70\r\n      0.3039\r\n      0.3228\r\n      4.2\r\n      0.3\r\n      0.1\r\n    1\r\n      DB\r\n      86\r\n      0.3231\r\n      0.3190\r\n      5.8\r\n      1.4\r\n      0.4\r\n    3\r\n      G\r\n      31\r\n      0.3085\r\n      0.3077\r\n      3.8\r\n      0.5\r\n      0.1\r\n    3\r\n      QB\r\n      20\r\n      0.2724\r\n      0.2990\r\n      1.6\r\n      0.5\r\n      0.0\r\n    3\r\n      T\r\n      40\r\n      0.2941\r\n      0.2964\r\n      3.7\r\n      0.3\r\n      0.0\r\n    2\r\n      RB\r\n      42\r\n      0.3054\r\n      0.2912\r\n      2.2\r\n      0.5\r\n      0.1\r\n    4\r\n      C\r\n      19\r\n      0.2735\r\n      0.2747\r\n      2.5\r\n      0.0\r\n      0.0\r\n    2\r\n      DB\r\n      103\r\n      0.2574\r\n      0.2727\r\n      4.1\r\n      0.4\r\n      0.1\r\n    3\r\n      RB\r\n      41\r\n      0.2633\r\n      0.2706\r\n      1.5\r\n      0.4\r\n      0.1\r\n    2\r\n      DT\r\n      35\r\n      0.2592\r\n      0.2531\r\n      3.5\r\n      0.3\r\n      0.1\r\n    1\r\n      TE\r\n      18\r\n      0.2411\r\n      0.2504\r\n      7.6\r\n      1.3\r\n      0.1\r\n    2\r\n      WR\r\n      71\r\n      0.2581\r\n      0.2500\r\n      3.2\r\n      0.5\r\n      0.0\r\n    2\r\n      DE\r\n      51\r\n      0.2435\r\n      0.2396\r\n      3.3\r\n      0.4\r\n      0.0\r\n    3\r\n      LB\r\n      75\r\n      0.2288\r\n      0.2222\r\n      2.5\r\n      0.2\r\n      0.1\r\n    4\r\n      DE\r\n      51\r\n      0.1977\r\n      0.2069\r\n      2.5\r\n      0.4\r\n      0.1\r\n    3\r\n      DE\r\n      42\r\n      0.2117\r\n      0.2019\r\n      2.6\r\n      0.2\r\n      0.0\r\n    4\r\n      DT\r\n      45\r\n      0.1928\r\n      0.1974\r\n      2.2\r\n      0.2\r\n      0.0\r\n    2\r\n      TE\r\n      28\r\n      0.1767\r\n      0.1778\r\n      3.7\r\n      0.6\r\n      0.1\r\n    3\r\n      DT\r\n      52\r\n      0.2050\r\n      0.1767\r\n      2.2\r\n      0.2\r\n      0.0\r\n    3\r\n      WR\r\n      83\r\n      0.1982\r\n      0.1667\r\n      2.0\r\n      0.3\r\n      0.1\r\n    3\r\n      DB\r\n      110\r\n      0.1676\r\n      0.1562\r\n      1.7\r\n      0.1\r\n      0.0\r\n    4\r\n      DB\r\n      116\r\n      0.1482\r\n      0.1304\r\n      1.4\r\n      0.1\r\n      0.0\r\n    3\r\n      TE\r\n      38\r\n      0.1355\r\n      0.1111\r\n      3.2\r\n      0.7\r\n      0.1\r\n    \r\n\r\nThis information as is gives you a good idea of how a team should think of the baselines and the averages regarding values of player positions, why specific positions at certain points in the draft are safer and others are riskier, and ideally would be the baseline of where any player evaluation starts, with the scouting report on a player layered on to this to move the expectation of how they will perform in their career up or down.\r\nIn future analyses I would hope to get more into distributions within each position or round group, where teams should be wary of the biggest “bust” potential, and ways to “outcome proof” your draft strategy.\r\nReach out to me on Twitter with any suggestions for future research or if you want to talk draft, looking forward to it, thanks for reading!\r\nDistill is a publication format for scientific and technical writing, native to the web.\r\nLearn more about using Distill at https://rstudio.github.io/distill.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-04-28-the-nfl-draft-an-analysis-of-player-value-outcomes-by-round-and-position/nfl-draft-2021-analysis-round-position-outcomes_files/figure-html5/unnamed-chunk-3-1.png",
    "last_modified": "2021-04-28T20:39:50-04:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/2021-03-17-cfb-data-api-access-and-manipulate-data-with-r-jsonlite-tidyverse/",
    "title": "College Football Data API with R",
    "description": "A fun introduction to accessing and manipulating data via the CollegeFootballData API with R, jsonlite, & tidyverse",
    "author": [
      {
        "name": "Jeff Asselin",
        "url": "https://github.com/jassassin68/"
      }
    ],
    "date": "2021-03-17",
    "categories": [
      "r",
      "sports"
    ],
    "contents": "\r\nIntroduction\r\nI love sports. The action, the historical moments, the athletic feats, the camaraderie. I have enjoyed sports since I was a child and I will continue to enjoy sports for my whole life.\r\nI also love working with data. I enjoy accessing it, wrangling it, transforming it, finding quirks in it, and making cool visualizations of it.\r\nFor me, Sports Analytics is a marriage of these two loves.\r\nI have worked on various data analysis and data science projects in the past (NHL, NFL, NBA, PGA, etc.) which I hope to share on here one day, but I wanted to kick off my sports analytics writing journey with a new dataset. A fresh start.\r\nCollegeFootballData.com is an incredible resource for data discovery related to NCAA football. Kudos to the maintainer of this resource. They have an extensive API with great quick start guides and documentation.\r\nIn this article, I will show you, an R user (specifically RStudio), how to get started accessing data in R via this API and pull together a quick analysis and visualization.\r\nInstall Packages\r\nStart with installing and declaring the following packages:\r\n\r\n\r\nlibrary(httr)\r\nlibrary(jsonlite)\r\nlibrary(tidyverse)\r\nlibrary(ggplot2)\r\n\r\n\r\n\r\nConstruct an API request link\r\nIf you take a look at the CollegeFootballData API documentation page, you can find a list of all of the data accessible from this API and test out what a given request example will return.\r\nFor this intro article, I am going to pull “talent composite rankings” data, by team, for the last three years (2018 through 2020).\r\nNavigating the API documentation page, scroll down to the “Teams” subhead, under which you will see a GET button with “/talent” next to it. Click the “GET” button, then the “Try it out” button in the drop down. If you type in a year and hit “EXECUTE”, you will see what was executed. Under “Responses” there is a subhead “Request URL”. This is the URL we will want to use.\r\nSee below for storing your request URL as a variable:\r\n\r\n\r\ntest_url <- '[YOUR URL HERE]'\r\n\r\n\r\n\r\nMy URL looks like so:\r\n\r\n\r\ntest_url <- 'https://api.collegefootballdata.com/talent?year=2020'\r\n\r\n\r\n\r\nNext, we will test out our URL to see if we receive a good response from the API.\r\n** Update: As of April 1st, 2021 the CFBD API requires an authentication key in order to access data. The steps to access data have changed slightly, the first step being getting a key here. Then bring your key into the script like so below:\r\n\r\n\r\ntoken <- paste0('Bearer ', '[YOUR TOKEN HERE]')\r\n\r\n\r\n\r\nRest of the steps updated below. **\r\nTest your link\r\nNow that you have your URL, it’s time to send a request to the API. We can do this using the ‘fromJSON’ function from the jsonlite package, after constructing your request with your auth token, like so below, and try to print the head of the response object:\r\n\r\n\r\n\r\n\r\n\r\n# API request\r\nreq <- httr::GET(test_url, httr::add_headers(Authorization = token))\r\n# Construct JSON\r\njson <- httr::content(req, as = \"text\")\r\n# Translate JSON\r\ntest_resp <- fromJSON(json)\r\nprint(head(test_resp))\r\n\r\n\r\n  year     school talent\r\n1 2020    Georgia 990.47\r\n2 2020    Alabama 985.86\r\n3 2020 Ohio State 976.48\r\n4 2020    Clemson 915.57\r\n5 2020      Texas 892.91\r\n6 2020  Texas A&M 875.10\r\n\r\nGreat! Now that we know our URL is returning a data object that is in a format we can work with, let’s write a function that allows us to pull this data for multiple years.\r\nWrite a function\r\nFor this data request, we will write a function that will take one year as input and return a dataframe with the data for that year. We will then map this function to a list of years, which will return a list of dataframes, which we will then combine into one dataframe.\r\nSee function below:\r\n\r\n\r\n# Create function for pulling CFB team talent data, for all teams accessible from the API, \r\n#     by year, for a list of years\r\ncfbdata_talent_by_yr <- function(year_no) {\r\n  \r\n  # Construct URL\r\n  api_request <- paste0('https://api.collegefootballdata.com/talent?year=', as.character(year_no))\r\n\r\n  # Store API response\r\n  req <- httr::GET(api_request, httr::add_headers(Authorization = token))\r\n  json <- httr::content(req, as = \"text\")\r\n  api_object <- jsonlite::fromJSON(json)\r\n  \r\n  # Check if the response is empty; if not, continue, if so, skip to next year in list\r\n  if (is.list(api_object) & length(api_object) == 0) { next }\r\n  if (is.null(api_object)) { next }\r\n  if (dim(api_object)[1] == 0) { next }\r\n  if (dim(api_object)[2] == 0) { next }\r\n  \r\n  # Store manipulated dataframe in df\r\n  talent_df <- api_object %>% \r\n    rename(team = school, talent_rating = talent) %>%\r\n    select(year, team, talent_rating) %>%\r\n    unique()\r\n  \r\n  return(talent_df)\r\n}\r\n\r\n\r\n\r\nWe are now ready to request data.\r\nRun your new data request\r\nYou can run your function like so below in order pull team talent composite rankings for the 2018, 2019, and 2020 seasons, storing the result in a new dataframe called “team_talent_df”:\r\n\r\n\r\n# Apply function to list of years with map\r\nteam_talent_df_list <- map(c(2018, 2019, 2020), cfbdata_talent_by_yr)\r\n\r\n# Use bind_rows to combine into one dataframe\r\nteam_talent_df <- bind_rows(team_talent_df_list, .id = 'column_label')\r\n\r\n# Get rid of new 'column_label' column, which we don't need\r\nteam_talent_df <- team_talent_df[,!(names(team_talent_df) == 'column_label')]\r\n\r\n# print head of df\r\nprint(head(team_talent_df))\r\n\r\n\r\n  year       team talent_rating\r\n1 2018 Ohio State        984.30\r\n2 2018    Alabama        978.54\r\n3 2018    Georgia        964.00\r\n4 2018        USC        933.65\r\n5 2018    Clemson        893.21\r\n6 2018        LSU        889.91\r\n\r\nLooks like our function worked and we have our data in a single dataframe! Let’s see if we can adjust the data at all to make it easier to work with before visualizing it.\r\nExplore and Manipulate Data\r\nNow that we have our dataset, let’s do some simple exploratory data analysis to check for any data quality issues. Below please find a handful of one-line function calls to check the data.\r\nThe function call ‘dim(df)’ tells us the dimensions of the dataframe; it looks like we have 686 rows and 4 columns.\r\n\r\n\r\n# print dim of df\r\nprint(dim(team_talent_df))\r\n\r\n\r\n[1] 686   3\r\n\r\nThe function call ‘summary(df)’ gives us a summary of each of the columns in the dataframe; it looks like even though ‘talent_rating’ is a number column, it is currently being stored as data type ‘character’:\r\n\r\n\r\n# print summary of df\r\nprint(summary(team_talent_df))\r\n\r\n\r\n      year          team           talent_rating     \r\n Min.   :2018   Length:686         Length:686        \r\n 1st Qu.:2018   Class :character   Class :character  \r\n Median :2019   Mode  :character   Mode  :character  \r\n Mean   :2019                                        \r\n 3rd Qu.:2020                                        \r\n Max.   :2020                                        \r\n\r\nLet’s adjust the data to set those to a numeric data type:\r\n\r\n\r\n# Change data type of \"talent_rating\" column from \"character\" to \"numeric\"\r\nteam_talent_df['talent_rating'] <- as.numeric(team_talent_df[['talent_rating']])\r\n\r\n\r\n\r\nAnd if we re-run the ‘summary’ function we get some new info:\r\n\r\n\r\n# print summary of df\r\nprint(summary(team_talent_df))\r\n\r\n\r\n      year          team           talent_rating   \r\n Min.   :2018   Length:686         Min.   :  3.30  \r\n 1st Qu.:2018   Class :character   1st Qu.: 46.85  \r\n Median :2019   Mode  :character   Median :344.01  \r\n Mean   :2019                      Mean   :335.59  \r\n 3rd Qu.:2020                      3rd Qu.:580.48  \r\n Max.   :2020                      Max.   :990.47  \r\n\r\nWell done! Now that we have formatted the data to our liking and reviewed some summary statistics, let’s create a visualization.\r\nVisualize\r\nOne thing I am interested in seeing is how “Talent Rating” has trended, over the three years that we pulled, for a select group of the top teams.\r\nLet’s visualize it:\r\n\r\n\r\n# Bar Chart displaying talent_rating for the teams \r\n#   Alabama, Ohio State, Clemson, Oklahoma, and LSU for the years 2018 through 2020\r\nteam_talent_rankings_viz <- team_talent_df %>%\r\n        filter(team %in% c('Alabama','Ohio State','Clemson', 'Oklahoma', 'LSU')) %>%\r\n        ggplot(aes(x = fct_reorder(team, talent_rating, .desc = TRUE), y = talent_rating, \r\n                    group = factor(year), fill = factor(year))) + \r\n        geom_bar(stat='identity',position='dodge') +\r\n      labs(x = 'Team',\r\n           y = 'Composite Talent Rating',\r\n           title = 'Composite Talent Rating - 2018 through 2020',\r\n           subtitle = 'Alabama, Ohio State, Clemson, Oklahoma, LSU Only',\r\n           legend = 'Year') + \r\n      guides(fill=guide_legend(title='Year')) + \r\n       theme_classic()\r\n\r\nprint(team_talent_rankings_viz)\r\n\r\n\r\n\r\n\r\nLastly, let’s write up some observations.\r\nConclusion\r\nIn this article I showed you how to test pulling data directly from an open-source API, write a function to do so more efficiently, explore, manipulate, and adjust data to fit your needs, and develop a clear and concise data visualization from that data.\r\nThe “Composite Talent Ratings” for the top teams should come as little surprise: Alabama is far and away the most talented team year in and year out, and we can see that this was the case for the three years we pulled. Ohio State is also a storied program and has had the talent to match up with Alabama the last three years, while Clemson, LSU, and Oklahoma, although certainly highly talented, see more variability year-to-year when it comes to their “Talent Ratings”.\r\nThere is plenty more you could do with this data, from correlating talent ratings with end-of-season outcomes or week-to-week win probabilities, to understanding how individual players contribute to this rating and if injuries could have major mid-season impacts, as well as many other potential data discoveries.\r\nMy hope is for you to use this introduction to dig into the data and explore further; please tweet me @JeffreyAsselin9 with your analyses or any questions, I would love to help out and cheer you on!\r\nThanks again to the maintainers of CollegeFootballData.com and RStudio. Happy Coding!\r\nDistill is a publication format for scientific and technical writing, native to the web.\r\nLearn more about using Distill at https://rstudio.github.io/distill.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-03-17-cfb-data-api-access-and-manipulate-data-with-r-jsonlite-tidyverse/cfb-data-api-access-and-manipulate-data-with-r-jsonlite-tidyverse_files/figure-html5/unnamed-chunk-13-1.png",
    "last_modified": "2021-04-12T11:51:14-04:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/2021-02-02-jeffs-journal-declaration-of-existence/",
    "title": "Jeff's Journal - Declaration of Existence",
    "description": "Existence Proclamation.",
    "author": [
      {
        "name": "Jeff Asselin",
        "url": "https://github.com/jassassin68/"
      }
    ],
    "date": "2021-02-02",
    "categories": [
      "intro"
    ],
    "contents": "\r\nHi, my name is Jeff Asselin. I currently work as a data analyst at a company called TechTarget, based out of Newton, Massachusetts.\r\nI wanted to start a blog mostly because I am tired of (read: inspired by) reading a ton of awesome content on other data blogs; I want to showcase what I have learned (both academically and by messier means), particularly in areas beyond my core competencies, and collaborate with other data practitioners wherever and whenever possible (reach out to me on Twitter if you are looking to collab!). Lastly, my hope is that by sharing my work I can help or inspire others following a similar journey.\r\nAs a means of putting my goals and aspirations out into the world, I am planning to write about some sports analytics R projects, scripts, processes, and models I have developed. I am also hoping to write about data explorations in the areas of music, books, and pop culture, and possibly share things like book, movie, and TV reviews if I feel inspired.\r\nLastly, this blog was created and will be maintained using RStudio and the distill R package, thank you to RStudio, the maintainers of distill, and the open-source community.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-04-01T10:08:10-04:00",
    "input_file": {}
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Jeff's Journal",
    "description": "Welcome to my new blog, Jeff's Journal. I hope you enjoy \nreading what I have to say!",
    "author": [
      {
        "name": "Jeff Asselin",
        "url": "https://github.com/jassassin68/"
      }
    ],
    "date": "2021-01-18",
    "categories": [
      "intro"
    ],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-04-01T10:08:35-04:00",
    "input_file": {}
  }
]
